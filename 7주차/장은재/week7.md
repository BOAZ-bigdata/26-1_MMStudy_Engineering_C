# **Orchestration vs Choreography**

### **분산 시스템에서의 서비스 협업 방식 비교**

---

> 하나의 작업을 처리하기 위해
여러 서비스가 함께 동작해야 하는 경우가 많다.
> 

> 이때,
서비스 간의 **실행 순서**를 누가 결정할 것인지,
그리고 **어떤 방식으로 협업**할 것인지를
설계 단계에서 고려해야 한다.
> 

이때 대표적인 협업 방식으로 두 가지가 존재한다.

- **Orchestration**
- **Choreography**

두 방식은 서비스 간 상호작용을 제어하는 방식에 따라

**결합도, 확장성, 장애 영향 범위** 등에서 서로 다른 특성을 가지며,

시스템 요구사항에 따라 선택되는 설계 패턴이다.

---

## **1) Orchestration**

> 중앙에서 전체 흐름을 지휘하는 방식
> 

하나의 중앙 컨트롤러(Orchestrator)*가 전체 작업의 실행 순서를 관리한다.

즉,

<aside>

- 어떤 서비스를 먼저 호출할지
- 다음에는 어떤 작업을 수행할지
- 실패하면 어떻게 되돌릴지
</aside>

→ 중앙에서 직접 결정한다.

### **장점**

- **전체 흐름**을 **한 곳에서 파악**할 수 있음
- 현재 작업이 어디까지 진행됐는지 **추적이 쉬움**

### **단점**

- 중앙 컴포넌트에 장애가 발생하면 **전체 시스템이 영향**을 받을 수 있음

---

## **2) Choreography**

> 중앙 없이 서비스들이 이벤트로 협력하는 방식
> 

중앙에서 지휘하는 컴포넌트 없이, 각 서비스가 **이벤트를 기반으로 자율적으로 동작**한다.

예를 들어,

<aside>

- 주문 서비스가 “주문 완료” 이벤트를 발행하면
- 결제 서비스가 이를 받아 결제를 수행하고
- 결제 완료 이벤트를 다시 발행하면
- 배송 서비스가 이를 받아 배송을 시작한다.
</aside>

각 서비스는 전체 흐름을 아는 것이 아니라,

**자신이 처리해야 할 이벤트에만 반응**한다.

### **장점**

- 서비스 간 **의존성이 낮아짐**
- 개별 서비스의 **독립적인 확장** 가능

### **단점**

- 전체 **작업 흐름**이 여러 서비스에 **흩어져 있음**
- 현재 작업이 **어디까지 진행됐는지** **파악하기 어려움**

---

## **Orchestration vs Choreography 비교**

| **구분** | **Orchestration** | **Choreography** |
| --- | --- | --- |
| 제어 방식 | 중앙 제어 | 분산 제어 |
| 통신 방식 | 명시적 호출(Call) | 이벤트(Event) |
| 결합도 | 높음 | 낮음 |
| 확장성 | 제한적 | 높음 |
| 장애 영향 범위 | 전체 영향 가능 | 국소 영향 |
| 흐름 가시성 | 높음 | 낮음 |
- **Orchestration**은 중앙에서 전체 흐름을 관리하기 때문에
현재 작업이 어디까지 진행됐는지 쉽게 추적할 수 있다.
- 반면 **Choreography**는 각 서비스가 이벤트에 따라 자율적으로 동작하기 때문에
서비스 간 결합도는 낮아지지만 전체 흐름을 한눈에 파악하기는 어려워진다.

---

## **실제 사례 -  Netflix  Conductor**

 **Netflix** 는 초기에 이벤트 기반 방식과 REST 호출을 조합하여

서비스 간 협업을 구성하였다.

하지만 **서비스 수가 증가**하고 **비즈니스 프로세스가 복잡**해지면서,

<aside>

- 작업 흐름이 여러 서비스 코드에 분산됨
- 서비스 간 데이터 전달 방식에 대한 의존성 생김
- 특정 작업이 어디까지 진행되었는지 추적하기 어려움
</aside>

**→ 문제 발생**

즉,

> **Choreography 방식**에서는 
전체 작업 흐름이 여러 서비스에 분산되기 때문에
이를 한 번에 파악하기 어려울 수 있다.
> 

이를 해결하기 위해  **Netflix** 는

중앙에서 서비스 간 워크플로를 관리할 수 있는

**Orchestration Engine**인  **Netflix**  **Conductor**를 개발하였다.

**요약:**

> **Netflix** 는 **Choreography의 한계**를 직접 경험한 뒤,
**Orchestration** **엔진**인 Conductor를 도입하여
작업 흐름을 중앙에서 추적하고 관리할 수 있게 되었다.
> 

---

## **✔️선택 기준**

### **Orchestration이 적합한 경우**

- 작업 단계가 많고 흐름이 복잡한 경우
- 전체 진행 상황을 추적하는 것이 중요한 경우

### **Choreography가 적합한 경우**

- 서비스 간 독립성이 중요한 경우
- 개별 서비스의 확장성이 중요한 경우

---

## **결론**

> **Orchestration**은 
**작업 흐름의 관리와 추적**이 중요한 시스템에 적합하며,
> 

> **Choreography**는 
**확장성과 서비스 독립성**이 중요한
분산 시스템에 적합한 협업 방식이다.
>